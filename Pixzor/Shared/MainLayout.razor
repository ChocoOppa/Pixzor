@inherits LayoutComponentBase

<style>
    .mud-container {
        margin: 0;
        padding: 0;
    }
    .mud-drawer .mud-drawer-content {
        align-items: center;
    }
</style>

<MudThemeProvider Theme="_theme" IsDarkMode="_isDarkMode" />
<MudDialogProvider />
<MudSnackbarProvider />

<MudLayout Class="d-flex flex-column">
    <MudAppBar Elevation="1">
        
        <!-- Hidden on Xs-->
        <MudHidden Breakpoint="Breakpoint.Xs">
            <MudIconButton Icon="@Icons.Material.Filled.Menu" 
                           Color="Color.Primary" Edge="Edge.Start" 
                           OnClick="@((e) => DrawerToggle(Anchor.Left))" />
            <MudText Typo="Typo.h6" Color="Color.Primary">Pixzor</MudText>
            <MudSpacer />
            <MudIconButton Icon="@Icons.Custom.Brands.GitHub"
                           Link="https://github.com/anhnq-git/Pixzor" 
                           Color="Color.Primary"
                           Target="_blank" />
        </MudHidden>

        <!-- Hidden on Sm and up-->
        <MudHidden Breakpoint="Breakpoint.SmAndUp">
            <MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Primary" Edge="Edge.Start" OnClick="@((e) => DrawerToggle(Anchor.Top))" />
            <MudText Class="mx-auto" Typo="Typo.h6" Color="Color.Primary">Pixzor</MudText>
            <MudIconButton Disabled="true" Icon="" Color="Color.Default" Edge="Edge.Start" OnClick="@((e) => DrawerToggle(Anchor.Top))" Style="width: 48px;" />
        </MudHidden>

    </MudAppBar>
    
    <!-- Hidden on Xs-->
    <MudHidden Breakpoint="Breakpoint.Xs">
        <MudDrawer @bind-Open="_drawer" Anchor="drawerAnchor" ClipMode="DrawerClipMode.Always" Variant="DrawerVariant.Persistent" Elevation="1" Width="200px">
            <NavMenu />
        </MudDrawer>
    </MudHidden>

    <!-- Hidden on Sm and up-->
    <MudHidden Breakpoint="Breakpoint.SmAndUp">
        <MudDrawer @bind-Open="_drawer" Anchor="drawerAnchor" ClipMode="DrawerClipMode.Never" Variant="DrawerVariant.Temporary" Elevation="1">
            <MudDrawerHeader>
                <MudText Typo="Typo.h6" Color="Color.Primary">Pixzor</MudText>
            </MudDrawerHeader>
            <NavMenu />
        </MudDrawer>
    </MudHidden>
    <MudMainContent>
        <MudContainer Class="ma-0 pa-0" MaxWidth="MaxWidth.False">
            @Body
        </MudContainer>
    </MudMainContent>
    <footer>
        This is a footer
    </footer>
</MudLayout>

@code {
    // MudTheme
    private bool _isDarkMode = false;
    MudTheme _theme = new()
        {
            Palette = new()
            {
                Primary = "#E3655B",
                PrimaryLighten = "#E27C78",
                PrimaryDarken = "#CE5C53",
                Secondary = "#858AE3",
                Tertiary = "#684551",
                Black = "#2A2D43",
                White = "#FBF9FF",
                Surface = "#FBF9FF",
                Background = "#FBF9FF",
                DrawerBackground = "#FBF9FF",
                AppbarBackground = "#FBF9FF",
                ActionDefault = "#fff",
                TextPrimary = "#2A2D43"
            }
    };

    // MudDrawer
    bool _drawer;
    Anchor drawerAnchor;

    void DrawerToggle(Anchor anchor)
    {
        _drawer = !_drawer;
        drawerAnchor = anchor;
    }
}